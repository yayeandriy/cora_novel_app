<aside class="right-sidebar">
  <div class="resize-handle right" (mousedown)="startResize($event)"></div>
  
  <div class="sidebar-content">
    <!-- Characters Section (separate component) -->
    <app-characters-panel
      [characters]="characters"
      [docCharacterIds]="docCharacterIds"
      [selectedDoc]="selectedDoc"
      [expanded]="charactersExpanded"
      [editingCharacterId]="editingCharacterId"
      (expandedChange)="onCharactersToggle()"
  (add)="onCharacterAdd()"
      (update)="onCharacterUpdate($event)"
      (remove)="onCharacterDelete($event)"
      (toggle)="characterToggle.emit($event)">
    </app-characters-panel>

    <!-- Events Section (separate component) -->
    <app-events-panel
      [events]="events"
      [docEventIds]="docEventIds"
      [selectedDoc]="selectedDoc"
      [expanded]="eventsExpanded"
      [editingEventId]="editingEventId"
      (expandedChange)="onEventsToggle()"
      (add)="eventAdd.emit()"
      (update)="eventUpdate.emit($event)"
      (remove)="eventDelete.emit($event)"
      (toggle)="eventToggle.emit($event)">
    </app-events-panel>

    <!-- Notes Section -->
    <div class="sidebar-section">
      <div class="section-header" (click)="onNotesToggle()">
        <div class="section-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="toggle-icon" [class.expanded]="notesExpanded" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
          <span>Notes</span>
        </div>
      </div>
      
      @if (notesExpanded) {
        <div class="section-content">
          @if (selectedDoc) {
            <textarea 
              class="notes-textarea" 
              [(ngModel)]="selectedDoc.notes"
              (input)="onNotesChange()"
              placeholder="Add notes..."></textarea>
          }
        </div>
      }
    </div>

    <!-- Drafts Section removed: moved to Document Editor header and split view -->
  </div>
</aside>
