<div class="folder-content-container" [class.layout-grid]="layout === 'grid'">
  <div class="folder-header-buttons">
    <div class="section-title">Notes</div>
    <button class="create-draft-btn" (click)="createDraft($event)" title="Create new draft">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon-plus" viewBox="0 0 24 24" fill="currentColor">
        <path d="M11 5a1 1 0 1 1 2 0v6h6a1 1 0 1 1 0 2h-6v6a1 1 0 1 1-2 0v-6H5a1 1 0 1 1 0-2h6V5z"/>
      </svg>
    </button>
  </div>
  <div class="folder-expanded-content" #scrollContainer [class.grid-content]="layout === 'grid'" cdkDropList [cdkDropListOrientation]="layout === 'grid' ? 'mixed' : 'horizontal'" (cdkDropListDropped)="drop($event)">
    @if (drafts.length > 0) {
      @for (draft of drafts; track draft.id) {
        <div class="draft-card" cdkDrag [class.selected]="selectedDraftId === draft.id" (click)="onDraftFocus(draft.id)">
          <div class="draft-card-header">
            <div class="drag-handle" cdkDragHandle title="Drag to reorder">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon-drag" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 18a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM14 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM14 18a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/>
              </svg>
            </div>
            <input 
              type="text"
              class="draft-name-input"
              [value]="draft.name"
              (input)="onNameInput(draft.id, $event)"
              (keydown.enter)="onNameEnter($event)"
              placeholder="Draft name">
            <button class="draft-delete-btn" (click)="onDeleteDraft(draft.id, $event)" title="Delete draft">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon-trash" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 7h12v13a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7zm3-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1h4a1 1 0 1 1 0 2H5a1 1 0 0 1 0-2h4V3z"/>
              </svg>
            </button>
          </div>
          <textarea 
            class="folder-draft-textarea"
            [(ngModel)]="draft.content"
            (ngModelChange)="onDraftChange(draft.id, draft.content || '', 0)"
            (focus)="onDraftFocus(draft.id)"
            [placeholder]="'Write your notes...'"></textarea>
        </div>
      }
    } @else {
      <div class="no-drafts-placeholder">No drafts</div>
    }
  </div>
</div>
