<div class="sidebar-section">
  <div class="section-header" (click)="toggleExpanded()">
    <div class="section-title">
      <svg xmlns="http://www.w3.org/2000/svg" class="toggle-icon" [class.expanded]="expanded" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
      </svg>
      <span>Drafts</span>
    </div>
    <button class="icon-button-small" 
            title="Add new draft" 
            (click)="createDraft(); $event.stopPropagation()">
      <svg xmlns="http://www.w3.org/2000/svg" 
           width="14" 
           height="14" 
           fill="none" 
           viewBox="0 0 24 24" 
           stroke="currentColor" 
           stroke-width="2.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
      </svg>
    </button>
  </div>
  
  <div *ngIf="expanded" class="section-content">
    <div *ngIf="drafts.length === 0" class="empty-text">No drafts</div>
    <div *ngFor="let draft of drafts; let i = index" class="draft-container">
      <div class="draft-header">
        <div class="draft-name">{{ draft.name }}</div>
        <div class="draft-actions">
          <div class="draft-status" [class.synced]="draftSyncStatus[draft.id] === 'synced'" [class.syncing]="draftSyncStatus[draft.id] === 'syncing'">
            {{ draftSyncStatus[draft.id] === 'syncing' ? '⟳' : (draftSyncStatus[draft.id] === 'synced' ? '✓' : '●') }}
          </div>
          <button class="delete-draft-button" 
                  title="Delete draft" 
                  (click)="deleteDraft(draft.id, $event)">
            <svg xmlns="http://www.w3.org/2000/svg" 
                 width="14" 
                 height="14" 
                 fill="none" 
                 viewBox="0 0 24 24" 
                 stroke="currentColor" 
                 stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          </button>
        </div>
      </div>
      <textarea
        class="draft-textarea"
        [value]="getDraftContent(draft.id)"
        (input)="onDraftChange(draft.id, $event)"
        (blur)="onDraftBlur(draft.id)"
        [placeholder]="'Draft: ' + draft.name">
      </textarea>
      <div class="draft-time">{{ draft.updated_at | date:'short' }}</div>
    </div>
  </div>
</div>
