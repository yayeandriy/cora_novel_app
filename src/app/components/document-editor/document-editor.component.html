@if (selectedDoc) {
<div class="editor-container">
  <div class="editor-toolbar">
    <input 
      #docTitleInput
      type="text" 
      class="doc-title-input" 
      [(ngModel)]="selectedDoc.name"
      (blur)="onTitleChange(selectedDoc!)"
      (keydown.enter)="focusEditor()"
      placeholder="Untitled">
    <div class="toolbar-actions">
      @if (showSaveStatus || hasUnsavedChanges) {
      <div class="save-status">
        <svg xmlns="http://www.w3.org/2000/svg" class="save-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
        </svg>
        @if (showSaveStatus) {
          <span class="save-text">Saved</span>
        }
        @if (!showSaveStatus && hasUnsavedChanges) {
          <span class="save-text">Unsaved</span>
        }
      </div>
      }
    </div>
  </div>
  
  <textarea 
    #editorTextarea
    [(ngModel)]="selectedDoc.text"
    (input)="onTextChange()"
    class="editor-textarea"
    (blur)="onBlur()"
    placeholder="Start writing...">
  </textarea>
  
  <div class="editor-footer">
    <div class="stats-container">
      <span class="stat-item">
        <span class="stat-label">A:</span>
        <span class="stat-value">{{ getDocCharCount() }}</span>
        <span class="stat-project">({{ formatNumber(getProjectCharCount()) }})</span>
      </span>
      <span class="stat-item">
        <span class="stat-label">W:</span>
        <span class="stat-value">{{ getDocWordCount() }}</span>
        <span class="stat-project">({{ formatNumber(getProjectWordCount()) }})</span>
      </span>
      <span class="stat-item">
        <svg class="page-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        <span class="stat-value">{{ getDocPageCount() }}</span>
        <span class="stat-project">({{ getProjectPageCount() }})</span>
      </span>
    </div>
  </div>
</div>
}
